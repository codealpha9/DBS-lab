-- 1 --

CREATE TABLE Employee(
EmpNo NUMERIC(5) PRIMARY KEY,
EmpName VARCHAR(20) NOT NULL,
Gender CHARACTER(1) NOT NULL CHECK (GENDER = 'M' OR GENDER = 'F'),
Salary NUMERIC(8) NOT NULL,
Address VARCHAR(20) NOT NULL,
DNo NUMERIC(5));

-- 2 --

CREATE TABLE Department(
DeptNo NUMERIC(5) PRIMARY KEY,
DeptName VARCHAR(20) UNIQUE);

-- 3 --

ALTER TABLE Employee ADD CONSTRAINT FK_DNo FOREIGN KEY(DNo) REFERENCES Department(DeptNo);

-- 4 --

INSERT INTO Department VALUES (1,'DEV');
INSERT INTO Department VALUES (2,'OPS');
INSERT INTO Department VALUES (3,'CustomerService');

INSERT INTO Employee VALUES (1,'Emp1','M',80000,'MANIPAL',1);
INSERT INTO Employee VALUES (2,'Emp2','M',30000,'MANIPAL',3);
INSERT INTO Employee VALUES (3,'Emp3','M',60000,'MANIPAL',2);
INSERT INTO Employee VALUES (4,'Emp4','F',90000,'MANIPAL',1);

-- 5 -- 

INSERT INTO Department VALUES (3,'HR');
INSERT INTO Employee VALUES (4,'Emp4','M',60000,'MANIPAL',4);
INSERT INTO Employee VALUES (3,'Emp3','M',60000,'MANIPAL',2);
INSERT INTO Employee VALUES (5,'Emp5','H',60000,'MANIPAL',2);

-- 6 -- 

DELETE FROM Department WHERE DeptNo IN (SELECT Dno FROM Employee GROUP BY DNo HAVING COUNT(*) > 1);

-- 7 --

ALTER TABLE Employee DROP CONSTRAINT FK_DNo;
ALTER TABLE Employee ADD CONSTRAINT FK_DNo FOREIGN KEY(DNo) REFERENCES Department(DeptNo) ON DELETE CASCADE;

--8--
 ALTER TABLE EMPLOYEE modify salary default 10000